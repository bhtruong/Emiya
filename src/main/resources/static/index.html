<!DOCTYPE HTML>
<html>
<head>
    <title>Emiya</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="main.css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
</head>
<body>
<div class="center">
    <h1>Emiya</h1>
    <form action="#">
        <br/>
        Number of Players
        <input class="players" type="number" name="Players" min="1" max="5" value="1" />
        <br/>
        <br/>
        <!-- TODO: generate on load -->
        <input class="cardSet" type="checkbox" name="Legendary" value="Legendary" /> Legendary
        <input class="cardSet" type="checkbox" name="Dark City" value="Dark City" /> Dark City
        <input class="cardSet" type="checkbox" name="Fantastic Four" value="Fantastic Four" /> Fantastic Four
        <br/>
        <br/>
        <input type="submit" value="Go!"/>
        <input class="reset" type="button" value="Reset"/>
        <div class="randomSetup">
            <h4>Scheme</h4>
            <p class="scheme"></p>
            <h4>Mastermind</h4>
            <p class="mastermind"></p>
            <h4>Villains</h4>
            <ul class="villains"></ul>
            <h4>Heroes</h4>
            <ul class="heroes"></ul>
        </div>
    </form>
</div>
</body>
</html>
<script>
    document.querySelector(".reset").addEventListener("click", function(event) {
        resetForm()
    })

    document.querySelector("form").addEventListener("submit", function(event) {
        var players = document.querySelector(".players").value
        var cardSets = []

        event.preventDefault()

        document.querySelectorAll(".cardSet").forEach(function(cardSet) {
            if (cardSet.checked) {
                cardSets.push(cardSet.value)
            }
        })

        renderMockedSetup(cardSets, players)
    })

    function removeChildren(parent) {
        while (parent.lastChild) {
            parent.removeChild(parent.lastChild)
        }
    }

    function resetForm() {
        removeChildren(document.querySelector(".scheme"))
        removeChildren(document.querySelector(".mastermind"))
        removeChildren(document.querySelector(".villains"))
        removeChildren(document.querySelector(".heroes"))
    }

    function renderScheme(scheme) {
        document.querySelector(".scheme").textContent = scheme.name
    }

    function renderMastermind(mastermind) {
        document.querySelector(".mastermind").textContent = mastermind.name
    }

    function renderVillains(villains) {
        var villainsNode = document.querySelector(".villains")

        villains.forEach(function(villainGroup) {
            var element = document.createElement("li")
            element.innerHTML = villainGroup.name
            villainsNode.appendChild(element)
        })
    }

    function renderHeroes(heroes) {
        var heroesNode = document.querySelector(".heroes")

        heroes.forEach(function(hero) {
            var element = document.createElement("li")
            element.innerHTML = hero.name
            heroesNode.appendChild(element)
        })
    }

    function renderMockedSetup(cardSets, players) {
        var mockedSetup = {
            "scheme": {
                "name": "Pull Reality into the Negative Zone"
            },
            "mastermind": {
                "name": "Galactus"
            },
            "villains": [
                {
                    "name": "Heralds of Galactus"
                },
                {
                    "name": "Subterranea"
                },
                {
                    "name": "Skrulls"
                },
                {
                    "name": "Doombot Legion"
                },
                {
                    "name": "Savage Land Mutates"
                }
            ],
            "heroes": [
                {
                    "name": "Mr. Fantastic"
                },
                {
                    "name": "Invisible Woman"
                },
                {
                    "name": "Human Touch"
                },
                {
                    "name": "Thing"
                },
                {
                    "name": "Spider-Man"
                }
            ]
        }

        renderScheme(mockedSetup["scheme"])
        renderMastermind(mockedSetup["mastermind"])
        renderVillains(mockedSetup["villains"])
        renderHeroes(mockedSetup["heroes"])
    }
</script>